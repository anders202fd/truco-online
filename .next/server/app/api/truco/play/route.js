"use strict";(()=>{var e={};e.id=624,e.ids=[624],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1660:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>i,routeModule:()=>c,serverHooks:()=>y,staticGenerationAsyncStorage:()=>d});var t={};o.r(t),o.d(t,{POST:()=>p});var a=o(9303),n=o(8716),s=o(670),l=o(7070),u=o(6801);async function p(e){try{let{playerId:r,betAmount:o}=await e.json();if(!r||!o)return l.NextResponse.json({success:!1,error:"Player ID e valor da aposta s\xe3o obrigat\xf3rios"},{status:400});if(o<=0)return l.NextResponse.json({success:!1,error:"Valor da aposta deve ser maior que zero"},{status:400});let t={id:parseInt(r),balance:1e3};if(t.balance<o)return l.NextResponse.json({success:!1,error:"Saldo insuficiente"},{status:400});let a=(0,u.J9)(r,o),n=t.balance,s=0;return a.playerWin?(s=1.8*o,n=t.balance-o+s):(n=t.balance-o,s=0),console.log("Jogo executado com sucesso:",{playerId:r,betAmount:o,playerWin:a.playerWin,newBalance:n,winnings:s}),l.NextResponse.json({success:!0,data:{...a,newBalance:n,betAmount:o,winnings:s}})}catch(e){return console.error("Erro detalhado na API do Truco:",e),l.NextResponse.json({success:!1,error:"Erro interno do servidor",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/truco/play/route",pathname:"/api/truco/play",filename:"route",bundlePath:"app/api/truco/play/route"},resolvedPagePath:"/workspaces/truco-online/src/app/api/truco/play/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:i,staticGenerationAsyncStorage:d,serverHooks:y}=c,m="/api/truco/play/route";function h(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:d})}},6801:(e,r,o)=>{o.d(r,{J9:()=>a,xj:()=>l});let t=["4‚ô†Ô∏è","4‚ô•Ô∏è","4‚ô¶Ô∏è","4‚ô£Ô∏è","5‚ô†Ô∏è","5‚ô•Ô∏è","5‚ô¶Ô∏è","5‚ô£Ô∏è","6‚ô†Ô∏è","6‚ô•Ô∏è","6‚ô¶Ô∏è","6‚ô£Ô∏è","7‚ô†Ô∏è","7‚ô•Ô∏è","7‚ô¶Ô∏è","7‚ô£Ô∏è","Q‚ô†Ô∏è","Q‚ô•Ô∏è","Q‚ô¶Ô∏è","Q‚ô£Ô∏è","J‚ô†Ô∏è","J‚ô•Ô∏è","J‚ô¶Ô∏è","J‚ô£Ô∏è","K‚ô†Ô∏è","K‚ô•Ô∏è","K‚ô¶Ô∏è","K‚ô£Ô∏è","A‚ô†Ô∏è","A‚ô•Ô∏è","A‚ô¶Ô∏è","A‚ô£Ô∏è","2‚ô†Ô∏è","2‚ô•Ô∏è","2‚ô¶Ô∏è","2‚ô£Ô∏è","3‚ô†Ô∏è","3‚ô•Ô∏è","3‚ô¶Ô∏è","3‚ô£Ô∏è"];function a(e,r){try{let e=.004>=Math.random(),o=n(3),t=n(3),a=[],l=0,u=0;for(let r=0;r<3;r++){let n;let p=o[r],c=t[r],i=s(p),d=s(c);n=e&&2===r&&l===u?"player":!e&&2===r&&l>u?"opponent":i>d?"player":"opponent","player"===n?l++:u++,a.push({roundNumber:r+1,playerCard:p,opponentCard:c,winner:n,cardValues:{playerValue:i,opponentValue:d}})}let p=l>u,c=e?p:!p,i=c?`üéâ Voc\xea ganhou! Parab\xe9ns! Voc\xea ganhou R$ ${(1.8*r).toFixed(2)}`:`üò¢ Voc\xea perdeu! O oponente foi melhor desta vez. Voc\xea perdeu R$ ${r.toFixed(2)}`;return{playerWin:c,message:i,cards:[...o,...t],playerCards:o,opponentCards:t,gameDetails:{playerScore:c?Math.max(l,2):Math.min(l,1),opponentScore:c?Math.min(u,1):Math.max(u,2),rounds:a}}}catch(e){return console.error("Erro na fun\xe7\xe3o playTrucoGame:",e),{playerWin:!1,message:"\uD83D\uDE22 Voc\xea perdeu! Tente novamente.",cards:["7‚ô†Ô∏è","Q‚ô•Ô∏è","A‚ô¶Ô∏è","4‚ô£Ô∏è","K‚ô†Ô∏è","2‚ô•Ô∏è"],playerCards:["7‚ô†Ô∏è","Q‚ô•Ô∏è","A‚ô¶Ô∏è"],opponentCards:["4‚ô£Ô∏è","K‚ô†Ô∏è","2‚ô•Ô∏è"],gameDetails:{playerScore:1,opponentScore:2,rounds:[{roundNumber:1,playerCard:"7‚ô†Ô∏è",opponentCard:"4‚ô£Ô∏è",winner:"player",cardValues:{playerValue:3,opponentValue:0}},{roundNumber:2,playerCard:"Q‚ô•Ô∏è",opponentCard:"K‚ô†Ô∏è",winner:"opponent",cardValues:{playerValue:4,opponentValue:6}},{roundNumber:3,playerCard:"A‚ô¶Ô∏è",opponentCard:"2‚ô•Ô∏è",winner:"opponent",cardValues:{playerValue:7,opponentValue:8}}]}}}}function n(e){try{let r=["‚ô†Ô∏è","‚ô•Ô∏è","‚ô¶Ô∏è","‚ô£Ô∏è"],o=["4","5","6","7","Q","J","K","A","2","3"],t=[];for(let a=0;a<e;a++){let e=o[Math.floor(Math.random()*o.length)],a=r[Math.floor(Math.random()*r.length)];t.push(`${e}${a}`)}return t}catch(e){return console.error("Erro ao gerar cartas:",e),["7‚ô†Ô∏è","Q‚ô•Ô∏è","A‚ô¶Ô∏è"]}}function s(e){try{let r=t.indexOf(e);return r>=0?r:0}catch(e){return console.error("Erro ao obter valor da carta:",e),0}}function l(e){try{let r=e.length,o=e.filter(e=>e.playerWin).length,t=e.reduce((e,r)=>e+r.betAmount,0),a=e.filter(e=>e.playerWin).reduce((e,r)=>e+1.8*r.betAmount,0),n=e.filter(e=>!e.playerWin).reduce((e,r)=>e+r.betAmount,0);return{totalGames:r,wins:o,losses:r-o,winRate:r>0?o/r*100:0,totalBet:t,totalWinnings:a,totalLosses:n,netProfit:a-n}}catch(e){return console.error("Erro ao calcular estat\xedsticas:",e),{totalGames:0,wins:0,losses:0,winRate:0,totalBet:0,totalWinnings:0,totalLosses:0,netProfit:0}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[948,972],()=>o(1660));module.exports=t})();